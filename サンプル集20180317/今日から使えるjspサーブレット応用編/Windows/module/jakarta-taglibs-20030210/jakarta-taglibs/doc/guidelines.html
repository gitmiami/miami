<html><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta content="Shawn Bayern" name="author"><title>Taglib Developer Guidelines</title></head><body vlink="#023264" alink="#023264" link="#023264" text="#000000" bgcolor="#ffffff"><table cellspacing="5" width="100%" border="0"><tr><td colspan="2"><a href="http://jakarta.apache.org"><img border="0" align="left" src="images/jakarta-logo.gif"></a><a href="http://jakarta.apache.org/taglibs/index.html"><img border="0" align="right" src="images/taglibs.gif"></a></td></tr><tr><td colspan="2"><hr></td></tr><tr><td valign="top" width="120"><project name="Taglibs Framework" href="http://jakarta.apache.org/taglibs" image="images/taglibs.gif">

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Home</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="index.html">Jakarta Taglibs</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>JCP Standardized Tag Libraries</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/standard-doc/intro.html">Standard: JSTL (1.2)</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Supported Tag Libaries</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/application-doc/intro.html">Application (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/benchmark-doc/intro.html">Benchmark (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/bsf-doc/intro.html">BSF (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/cache-doc/intro.html">Cache (1.2)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/datetime-doc/intro.html">DateTime (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/dbtags-doc/intro.html">DBTags (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/i18n-doc/intro.html">I18N (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/input-doc/intro.html">Input (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/io-doc/intro.html">IO (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/jmstags-doc/intro.html">JMS (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/jndi-doc/intro.html">JNDI (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/log-doc/intro.html">Log (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/mailer-doc/intro.html">Mailer (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/page-doc/intro.html">Page (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/random-doc/intro.html">Random (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/regexp-doc/intro.html">Regexp (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/request-doc/intro.html">Request (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/response-doc/intro.html">Response (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/scrape-doc/intro.html">Scrape (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/session-doc/intro.html">Session (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/string-doc/intro.html">String (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/xtags-doc/intro.html">XTags (1.1)</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Tool Extensions</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/ultradev4-doc/intro.html">UltraDev 4.0</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Sandbox</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="sandbox/doc/iterators-doc/intro.html">Iterators (1.2)</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Deprecated Tag Libraries</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/utility-doc/intro.html">Utility (1.1)</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/taglibs/doc/xsl-doc/intro.html">XSL (1.1)</a></font></td></tr></table>

    <table cellspacing="5" border="0"><tr><th align="left" colspan="2"><font color=""><strong>Jakarta Community</strong></font></th></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/site/getinvolved.html">Get Involved</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/site/mail.html">Mailing Lists</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/site/cvsindex.html">CVS Repositories</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/site/library.html">Reference Library</a></font></td></tr><tr><td width="15" align="center"></td><td><font size="-1"><a href="http://jakarta.apache.org/site/bugs.html">Bug Database</a></font></td></tr></table>

</project></td><td valign="top"><body>


  <a name="Guidelines"></a><table width="100%" cellpadding="5" cellspacing="5" border="0"><tr><td bgcolor="#023264"><font size="+1" face="arial,helvetica,sanserif" color="#ffffff"><strong>Taglib Developer Guidelines</strong></font></td></tr><tr><td>
    <p>This guide attempts to give Tag Library authors a summary
      of guidelines and issues to be careful of when developing custom JSP tags.
    <br></p>

  <a name="Lifecycle"></a><table width="100%" cellpadding="5" cellspacing="5" border="0"><tr><td bgcolor="#023264"><font size="+1" face="arial,helvetica,sanserif" color="#ffffff"><strong>Guidelines for tag lifecycle management</strong></font></td></tr><tr><td>    
    <ol>
      <li>
        Properties are expected to remain consistent.  This means that:
        <ul>
          <li>
            user code should avoid calling a a setter method of a tag handler
            for properties that correspond to tag attributes.  That is, if
            a tag has a "value" attribute, user code should avoid calling
            setValue() for that tag's handler.
          </li>
          <li>
            the tag handler's code itself should not modify properties that are
            set by a setXXX() method
          </li>
          <li>
            tag handlers should not perform invocation-specific logic in a
            setXXX() method.  That is, the setting of a property should
            have no side effects.
          </li>
        </ul>
      </li>

      <li>
        Private, invocation-specific state must be managed manually.  
        Implications include that:
        <ul>
          <li>
            release() is not necessarily called between invocations, which
            means that tag logic should not count on private invocation-
            specific state being reset by release()
          </li>
          <li>
            doEndTag() is not necessarily called at the end of every invocation
            (in cases of abnormal termination -- e.g., an exception thrown inside
            a tag's body or by one of its methods)
          </li>
          <li>
            private invocation-specific state is thus best initialized in
            doStartTag()
          </li>
          <li>
            doFinally() *is* always called for tag handlers that implement
            TryCatchFinally, so this method should be used if any invocation-
            specific resources need to be released
          </li>
          <li>
            release() *is* always called at least once for a tag handler before
            it is garbage-collected, so this method can and should be used to
            release any long-term resources
          </li>
        </ul>
      </li>

      <li>
        Since tags may be re-used, user code should not refer to a tag handler
        beyond its natural scope.  This implies:
        <ul>
          <li>
            a tag handler must not expose itself as a scripting variable if
            that variable has AT_BEGIN or AT_END scope (although NESTED scope
            would not be problematic in this case).
          </li>
          <li>
            a tag handler should not set a reference to itself in the
            PageContext associated with the page for which it is invoked,
            unless expected use of such a reference would occur only during
            the invocation of the tag handler.
          </li>
        </ul>
      </li>
    </ol>
  </td></tr></table>


  <a name="Examples"></a><table width="100%" cellpadding="5" cellspacing="5" border="0"><tr><td bgcolor="#023264"><font size="+1" face="arial,helvetica,sanserif" color="#ffffff"><strong>Examples</strong></font></td></tr><tr><td>    
    <ol>
      <li>
        Suppose you have a tag that accepts some sort of expression that you
        need to resolve, e.g.:

        <pre>&lt;show value="$my-expression$"/&gt;</pre>

        <p>  
          "$my-expression$" should be stored by setValue() and evaluated (i.e.,
          resolved) in doStartTag().  For the behavior that's almost always
          desired, it should NOT be evaluated in setValue().  (Validation, such
          as syntax checking, is acceptable in the setter method.)
        <br></p>
        <p>
          Similarly, Iterators and Enumerations should not be extracted in a
          setXXX() method.  setXXX() methods are meant to be "idempotent";
          write them so that they can be called multiple times with no
          side effects (and, conversely, only once instead of multiple times
          if the argument passed is the same).
        <br></p>
      </li>
      <li>
        Private state that's kept for each invocation should typically be
        reset in doStartTag(), not in release().  If you have an iteration
        index controlling the behavior of a loop, doStartTag() is the
        appropriate method from which to initialize it.
      </li>
      <li>
        If a tag needs to open a new database connection (or file, or other
        external resource) for every invocation, the tag handler should
        implement TryCatchFinally and close the database connection (or
        other resource) in doFinally().  doEndTag() might not be called,
        and release() might not be called until long after you expect it to be.
      </li>
    </ol>
  </td></tr></table>

  </td></tr></table>



  </body></td></tr><tr><td colspan="2"><hr></td></tr><tr><td colspan="2"><div align="center"><font size="-1" color="#023264"><em>
        Copyright &copy; 2000, Apache Software Foundation
        </em></font></div></td></tr></table></body></html>