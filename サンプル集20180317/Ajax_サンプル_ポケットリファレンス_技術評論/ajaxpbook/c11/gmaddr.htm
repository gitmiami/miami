<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>Google Maps</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAAO-r1bqRz2fZr-QmjsewWxRgE_H9GM6zkZRwNii93jtvjOSYqRTUvjXBD0wChGoBh2xb30zNzkqZmA" type="text/javascript"></script>
<script type="text/javascript" src="../lib/funcs.js"></script>
<script type="text/javascript">
//<![CDATA[
var map = null;
var geocoder = null;
function initOnLoad() {
  if (GBrowserIsCompatible()) {
    map = new GMap2(id("map"));
    map.setCenter(new GLatLng(35.6815617, 139.7672091), 1);
		map.addControl(new GLargeMapControl());
    map.addControl(new GMapTypeControl());
    geocoder = new GClientGeocoder();
		setListener(id("addr"), "keyup", showMap);
  }
}
function showMap(e) {
	if(getkcode(e) == 18){
		var addr = id("addr").value;	
  	if (geocoder) {
    	geocoder.getLatLng(
      	addr,
	      function(point) {
  	      if (!point) {
    	      alert(addr + " が探せません。");
      	  } else {
        	  map.setCenter(point, 15);
          	var marker = new GMarker(point);
	          map.addOverlay(marker);
						var msg = "ここへ到着、ここから出発<br/>付近を検索、マイマップに保存<br/>";
  	        marker.openInfoWindowHtml(addr + "です。<br>" + msg);
    	    }
      	}
	    );
  	}
	}
}
setListener(window, "load", initOnLoad);
//]]>
</script>
</head>
<body>
住所/スポット名入力で地図を表示する<br/>
<b>住所/スポット名</b><input type="text" size="59" id="addr"/>
<div id="map" style="width: 500px; height: 370px"></div>
</body>
</html>

