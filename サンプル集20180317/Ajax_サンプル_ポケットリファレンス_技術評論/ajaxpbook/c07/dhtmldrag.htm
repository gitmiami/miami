<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="utf-8" lang="utf-8">
<head>
<title>script.aculo.us ドラッガブル </title>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<style type="text/css">
<!--
.style1{
	position:	 absolute; background: #bbf;
	height: 		75px; width: 160px;
	font-weight: 600;	font-size: 16px; 
	color:	 #009;
}
-->
</style>
<script type="text/javascript" src="../../lib/funcs.js"></script>
<script TYPE="text/javascript">
//<![CDATA[
//ブラウザのバージョンチェック
var brw_v = navigator.appVersion.charAt(0);
var brw_n = navigator.appName.charAt(0);
var iIE4 = false;
var iNN4 = false;
if((brw_v >= 4)&&(brw_n == "M"))iIE4 = true;
if((brw_v >= 4)&&(brw_n == "N"))iNN4 = true;
var M_flag = false;
var dx,dy;
function init(){
	if(iIE4){
		document.onmousedown = Mdown;
		document.onmouseup = Mup;
		lay = document.all("iL1");
		document.onmousemove = Mmove;
	}
	if(iNN4){
		window.captureEvents(Event.MOUSEDOWN | Event.MOUSEUP);
		window.captureEvents(Event.MOUSEMOVE);
		lay = document.layers["iL1"];
		window.onmousedown = Mdown;
		window.onmouseup = Mup;
		window.onmousemove = Mmove;
	}
}

function Mdown(e){
	if(iIE4){
		dx = event.offsetX;
		dy = event.offsetY;
	}
	if(iNN4){
		dx = e.layerX;
		dy = e.layerY;
	}
	M_flag = true;
	return false;
}

function Mup(e){
	M_flag = false;
	return false;
 }

function Mmove(e){
	if(iIE4){
		if(M_flag){
			lay.style.posLeft = event.clientX - dx;
			lay.style.posTop = event.clientY - dy;
		}
		event.returnValue = false;
	}
	if(iNN4){
		if(M_flag){
			lay.left = e.pageX - dx;
			lay.top = e.pageY - dy;
		}
		return false;
	}
}
addListener(self, "load", init, false);
//]]>
</script>
</head>
<body>
<h2>Dynamic HTML ドラッガブル</h2>
<div id="iL1" class="style1">
栃木、群馬、茨城,<br/>
千葉、埼玉、東京、<br/>
神奈川、山梨
</div>
</body>
</html>

