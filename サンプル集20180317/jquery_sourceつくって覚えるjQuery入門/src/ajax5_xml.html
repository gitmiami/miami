<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>非同期通信サンプル</title>
<script src="jquery-1.6.2.js"></script>
<script type="text/javascript">
$(function(){
	// ボタンがクリックされたときの処理
	$(":button").click(function() {
		// 行の中身を空にする
		$("#header").html("");
		$("#data").html("");

		// 「data.xml」を読み込む
		$.get("data.xml",//送信先のファイルパス
			{},           //送信するパラメータ
			createTable,  //成功時の処理
			"xml"         // 受信するデータ形式
		);
	});



	// 表を作成する関数
	var createTable = function(xml) {
		// datasetタグの要素を繰り返し処理する
		$(xml).find("dataset").each(function(){

			// data_labeタグのテキストを取り出す
			var label = $(this).find("data_label").text();
			// header行にラベルの列を追加する
			$("#header").append("<th>" + label +"</th>");

			// data_valueタグのテキストを取り出す
			var value = $(this).find("data_value").text();
			// data行に値の列を追加する
			$("#data").append("<td>" + value + "</td>");

		});
	};
});
</script>
<style>
table {
border:1px solid #000000;
border-spacing:0;
border-collapse:collapse;
width:400px;
}
th {
border:1px solid #000000;
padding:5px;
background:#CCCCCC;
}
td {
border:1px solid #000000;
padding:5px;
text-align:center;
}
</style>
</head>
<body>
<input type="button" value="XMLの読み込み">
<hr>
<table>
<tr id="header"><th>data.xml</th></tr>
<tr id="data"><td>データが読み込まれていません。</td></tr>
</table>
</body>
</html>
